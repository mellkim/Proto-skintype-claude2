<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Genetic Skin Analysis â€“ Final</title>
    <!-- Tailwind (CDN) â†’ ê²½ê³ ëŠ” ê°œë°œìš©ì´ë¼ ì •ìƒì…ë‹ˆë‹¤. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React 18 UMD + Babel (ë¸Œë¼ìš°ì € JSX ë³€í™˜) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-slate-50 min-h-screen">
    <div id="root" class="p-4 md:p-6"></div>

    <script type="text/babel" data-presets="react">
      /************ ê³µí†µ ìœ í‹¸ & ì•„ì´ì½˜(ì´ëª¨ì§€ ëŒ€ì²´) ************/
      const { useState, useMemo } = React;
      const Icon = ({ children, className = '' }) => (
        <span className={'inline-block align-middle ' + className}>{children}</span>
      );
      const I = {
        plus: (p)=> <Icon {...p}>ï¼‹</Icon>,
        minus: (p)=> <Icon {...p}>âˆ’</Icon>,
        up: (p)=> <Icon {...p}>ğŸ“ˆ</Icon>,
        warn: (p)=> <Icon {...p}>âš ï¸</Icon>,
        cal: (p)=> <Icon {...p}>ğŸ“…</Icon>,
        chevR: (p)=> <Icon {...p}>â€º</Icon>,
        chart: (p)=> <Icon {...p}>ğŸ“Š</Icon>,
        info: (p)=> <Icon {...p}>â„¹ï¸</Icon>,
        spark: (p)=> <Icon {...p}>âœ¨</Icon>,
        beaker: (p)=> <Icon {...p}>ğŸ§ª</Icon>,
        bag: (p)=> <Icon {...p}>ğŸ›ï¸</Icon>,
        bulb: (p)=> <Icon {...p}>ğŸ’¡</Icon>,
        close: (p)=> <Icon {...p}>âœ•</Icon>,
      };

      /************ ë°ì´í„° ************/
      const SAMPLE_REPORTS = [
        { id: 'report_001', date: '2025-09-02', week: 0, title: 'ì´ˆê¸° ë¶„ì„', overallScore: 78, status: 'completed' },
        { id: 'report_002', date: '2025-08-05', week: 4, title: '4ì£¼ì°¨ ì¶”ì ', overallScore: 85, status: 'completed' },
        { id: 'report_003', date: '2025-07-08', week: 8, title: '8ì£¼ì°¨ ì¶”ì ', overallScore: 82, status: 'completed' },
      ];

      const BIOMARKER_DETAILS = {
        PINK1: {
          fullName: 'PINK1 (PTEN-induced kinase 1)',
          function: 'ë¯¸í† ì½˜ë“œë¦¬ì•„ í’ˆì§ˆ ê´€ë¦¬ ë° ì„¸í¬ ì—ë„ˆì§€ ëŒ€ì‚¬ë¥¼ ì¡°ì ˆí•˜ëŠ” í•µì‹¬ ìœ ì „ìì…ë‹ˆë‹¤.',
          mechanism: 'ì†ìƒëœ ë¯¸í† ì½˜ë“œë¦¬ì•„ë¥¼ ì œê±°í•˜ëŠ” ë§ˆì´í† íŒŒì§€ ê³¼ì •ì„ ì¡°ì ˆí•˜ì—¬ ì„¸í¬ ê±´ê°•ì„ ìœ ì§€í•©ë‹ˆë‹¤.',
          ingredients: [
            { name: 'ë‚˜ì´ì•„ì‹ ì•„ë§ˆì´ë“œ', description: 'ë¯¸í† ì½˜ë“œë¦¬ì•„ ê¸°ëŠ¥ í–¥ìƒ', concentration: '2-5%' },
            { name: 'ë ˆí‹°ë†€', description: 'ì„¸í¬ ì¬ìƒ ì´‰ì§„', concentration: '0.25-1%' },
          ],
          products: ['ë” ì˜¤ë””ë„ˆë¦¬ ë‚˜ì´ì•„ì‹ ì•„ë§ˆì´ë“œ 10%', 'ë¡œë ˆì•Œ ë ˆë¹„íƒˆë¦¬í”„íŠ¸ ë‚˜ì´íŠ¸ ì„¸ëŸ¼'],
          tips: ['ì¶©ë¶„í•œ ìˆ˜ë©´ìœ¼ë¡œ ì„¸í¬ ì¬ìƒ ì‹œê°„ í™•ë³´', 'í•­ì‚°í™” ì„±ë¶„ì´ í’ë¶€í•œ ì‹í’ˆ ì„­ì·¨'],
        },
        COL1A1: {
          fullName: 'COL1A1 (Collagen Type I Alpha 1)',
          function: 'ì œ1í˜• ì½œë¼ê²ì˜ ì£¼ìš” êµ¬ì„± ì„±ë¶„ì„ ìƒì„±. í”¼ë¶€ ê°•ë„Â·íƒ„ë ¥ì„± ê²°ì •.',
          mechanism: 'ì½œë¼ê² ì„¬ìœ ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” Î±1 ì‚¬ìŠ¬ì„ ì•”í˜¸í™”.',
          ingredients: [{ name: 'ë¹„íƒ€ë¯¼ C', description: 'ì½œë¼ê² í•©ì„± ì´‰ì§„', concentration: '10-20%' }],
          products: ['CEí˜ë¦° ë¹„íƒ€ë¯¼C ì„¸ëŸ¼'],
          tips: ['ë¹„íƒ€ë¯¼ C í’ë¶€í•œ ê³¼ì¼, ì±„ì†Œ ì„­ì·¨'],
        },
        MSN: {
          fullName: 'MSN (Moesin)',
          function: 'ì„¸í¬ë§‰ì˜ êµ¬ì¡°ì  ì•ˆì •ì„±ê³¼ í”¼ë¶€ ì¥ë²½ ê¸°ëŠ¥ ì¡°ì ˆ.',
          mechanism: 'ì„¸í¬ë§‰ê³¼ ì„¸í¬ê³¨ê²©ì„ ì—°ê²°í•´ í”¼ë¶€ ì„¸í¬ì˜ í˜•íƒœ ìœ ì§€.',
          ingredients: [{ name: 'ì„¸ë¼ë§ˆì´ë“œ', description: 'ì„¸í¬ë§‰ ê°•í™”', concentration: '2-5%' }],
          products: ['CeraVe ëª¨ì´ìŠ¤ì²˜ë¼ì´ì§• í¬ë¦¼'], tips: ['ê³¼ë„í•œ ì„¸ì•ˆ í”¼í•˜ê¸°'],
        },
        HAS2: {
          fullName: 'HAS2 (Hyaluronic Acid Synthase 2)',
          function: 'íˆì•Œë£¨ë¡ ì‚° í•©ì„± â†’ í”¼ë¶€ ìˆ˜ë¶„ ë³´ìœ  ëŠ¥ë ¥ ê²°ì •.',
          mechanism: 'íˆì•Œë£¨ë¡ ì‚°ì„ ìƒì„±í•˜ì—¬ í”¼ë¶€ì— ìˆ˜ë¶„ ê³µê¸‰.',
          ingredients: [{ name: 'íˆì•Œë£¨ë¡ ì‚°', description: 'ìˆ˜ë¶„ ê³µê¸‰', concentration: '0.5-2%' }],
          products: ['ë” ì˜¤ë””ë„ˆë¦¬ íˆì•Œë£¨ë¡ ì‚° 2% + B5'], tips: ['ì¶©ë¶„í•œ ë¬¼ ì„­ì·¨'],
        },
        FLG: {
          fullName: 'FLG (Filaggrin)',
          function: 'ê°ì§ˆì¸µì˜ ë³´ìŠµ ì¸ì ìƒì„± â†’ í”¼ë¶€ ì¥ë²½ ìœ ì§€.',
          mechanism: 'ì²œì—°ë³´ìŠµì¸ì ì›ë£Œê°€ ë˜ì–´ ê°ì§ˆì¸µ ìˆ˜ë¶„ ìœ ì§€.',
          ingredients: [{ name: 'ìš°ë ˆì•„', description: 'ì²œì—°ë³´ìŠµì¸ì ë³´ì¶©', concentration: '5-10%' }],
          products: ['ìœ ì„¸ë¦° UreaRepair í¬ë¦¼'], tips: ['ë¯¸ì§€ê·¼í•œ ë¬¼ë¡œ ì§§ê²Œ ìƒ¤ì›Œí•˜ê¸°'],
        },
        AQP3: {
          fullName: 'AQP3 (Aquaporin-3)',
          function: 'ì„¸í¬ë§‰ì˜ ìˆ˜ë¶„ í†µë¡œ ì—­í• .',
          mechanism: 'ì„¸í¬ ë‚´ì™¸ ë¬¼ ë¶„ì ì´ë™ í†µë¡œ ì œê³µ.',
          ingredients: [{ name: 'ê¸€ë¦¬ì„¸ë¦°', description: 'ìˆ˜ë¶„ ì „ë‹¬ ì´‰ì§„', concentration: '5-15%' }],
          products: ['ë‰´íŠ¸ë¡œì§€ë‚˜ í•˜ì´ë“œë¼ë¶€ìŠ¤íŠ¸ ì„¸ëŸ¼'], tips: ['í•˜ë£¨ 2-3L ìˆ˜ë¶„ ì„­ì·¨'],
        },
        SPINK5: {
          fullName: 'SPINK5 (Serine Peptidase Inhibitor Kazal Type 5)',
          function: 'í”¼ë¶€ ì¥ë²½ ë³´í˜¸ íš¨ì†Œ ì–µì œì œ.',
          mechanism: 'ì„¸ë¦° í”„ë¡œí…Œì•„ì œ ì–µì œë¡œ í”¼ë¶€ ì¥ë²½ ìœ ì§€.',
          ingredients: [{ name: 'ì•Œë€í† ì¸', description: 'í”¼ë¶€ ì§„ì •', concentration: '0.5-2%' }],
          products: ['ë¼ë¡œìŠˆí¬ì œ í†¨ë ˆë¦¬ì•ˆ ì¼€ì–´'], tips: ['ìê·¹ì ì¸ ì„±ë¶„ í”¼í•˜ê¸°'],
        },
        MLANA: {
          fullName: 'MLANA (Melanoma Antigen)',
          function: 'ë©œë¼ë‹Œ ìƒì„±ê³¼ ìƒ‰ì†Œ ì„¸í¬ ê¸°ëŠ¥ ì¡°ì ˆ.',
          mechanism: 'ë©œë¼ë…¸ì‚¬ì´íŠ¸ ì„±ìˆ™Â·ë©œë¼ë‹Œ í•©ì„± ê³¼ì • ê´€ì—¬.',
          ingredients: [{ name: 'ë¹„íƒ€ë¯¼ C', description: 'ë©œë¼ë‹Œ ìƒì„± ì–µì œ', concentration: '10-20%' }],
          products: ['í´ë¦¬ë‹ˆí¬ ì´ë¸ ë² í„° ì„¸ëŸ¼'], tips: ['ë§¤ì¼ ìì™¸ì„  ì°¨ë‹¨ì œ ì‚¬ìš©'],
        },
        TFAP2A: {
          fullName: 'TFAP2A (Transcription Factor AP-2 Alpha)',
          function: 'ìƒ‰ì†Œ ì„¸í¬ ë°œë‹¬Â·ë©œë¼ë‹Œ ìƒì„± ì¡°ì ˆ ì „ì‚¬ ì¸ì.',
          mechanism: 'ë©œë¼ë…¸ì‚¬ì´íŠ¸ ë¶„í™”ë¥¼ ì¡°ì ˆ.',
          ingredients: [{ name: 'ë‚˜ì´ì•„ì‹ ì•„ë§ˆì´ë“œ', description: 'ë©œë¼ë‹Œ ì „ë‹¬ ì–µì œ', concentration: '5-10%' }],
          products: ['ë” ì˜¤ë””ë„ˆë¦¬ ì•ŒíŒŒ ì•„ë¥´ë¶€í‹´ 2%'], tips: ['ê¾¸ì¤€í•œ ìì™¸ì„  ì°¨ë‹¨'],
        },
        SOD1: {
          fullName: 'SOD1 (Superoxide Dismutase 1)',
          function: 'í™œì„±ì‚°ì†Œ ì œê±° í•­ì‚°í™” íš¨ì†Œ.',
          mechanism: 'í™œì„±ì‚°ì†Œë¥¼ ì•ˆì „í•œ ë¬¼ì§ˆë¡œ ë³€í™˜ â†’ ì„¸í¬ ì†ìƒ ë°©ì§€.',
          ingredients: [{ name: 'ë¹„íƒ€ë¯¼ E', description: 'í•­ì‚°í™” ì‹œë„ˆì§€', concentration: '0.5-1%' }],
          products: ['SkinCeuticals CE Ferulic'], tips: ['í•­ì‚°í™” ìŒì‹ ì„­ì·¨'],
        },
        VDR: {
          fullName: 'VDR (Vitamin D Receptor)',
          function: 'ë¹„íƒ€ë¯¼ D ì‘ìš© ë§¤ê°œ â†’ í”¼ë¶€ ì„¸í¬ ì¡°ì ˆ.',
          mechanism: 'ë¹„íƒ€ë¯¼ Dì™€ ê²°í•©í•´ ì„¸í¬ ê¸°ëŠ¥ ì¡°ì ˆ.',
          ingredients: [{ name: 'ë¹„íƒ€ë¯¼ D3', description: 'VDR í™œì„±í™”', concentration: '1000-4000IU' }],
          products: ['ë„¤ì´ì²˜ë©”ì´ë“œ ë¹„íƒ€ë¯¼ D3'], tips: ['ì ë‹¹í•œ ì¼ê´‘ìš•'],
        },
      };

      const SAMPLE_CURRENT_DATA = {
        userId: 'user123', analysisId: 'analysis456', timestamp: new Date(), week: 0,
        biomarkers: {
          aging: [
            { gene: 'PINK1', value: -15, koreanMean: -10, stdDev: 8, name: 'ë¯¸í† ì½˜ë“œë¦¬ì•„ ê¸°ëŠ¥' },
            { gene: 'COL1A1', value: 25, koreanMean: 15, stdDev: 12, name: 'ì½œë¼ê² ìƒì„±' },
            { gene: 'MSN', value: -5, koreanMean: 0, stdDev: 6, name: 'ì„¸í¬ë§‰ ì•ˆì •ì„±' },
            { gene: 'HAS2', value: 30, koreanMean: 20, stdDev: 10, name: 'íˆì•Œë£¨ë¡ ì‚° í•©ì„±' },
          ],
          dryness: [
            { gene: 'FLG', value: 40, koreanMean: 25, stdDev: 15, name: 'í•„ë¼ê·¸ë¦°' },
            { gene: 'AQP3', value: -20, koreanMean: -15, stdDev: 8, name: 'ì•„ì¿ ì•„í¬ë¦°-3' },
            { gene: 'SPINK5', value: 10, koreanMean: 5, stdDev: 7, name: 'ì„¸ë¦° í”„ë¡œí…Œì•„ì œ ì–µì œ' },
          ],
          pigmentation: [
            { gene: 'MLANA', value: -25, koreanMean: -20, stdDev: 9, name: 'ë©œë¼ë‹Œ ìƒì„±' },
            { gene: 'TFAP2A', value: 15, koreanMean: 10, stdDev: 8, name: 'ì „ì‚¬ì¸ì AP-2Î±' },
            { gene: 'SOD1', value: -10, koreanMean: -5, stdDev: 6, name: 'í•­ì‚°í™” íš¨ì†Œ' },
            { gene: 'VDR', value: 35, koreanMean: 20, stdDev: 12, name: 'ë¹„íƒ€ë¯¼D ìˆ˜ìš©ì²´' },
          ],
        },
      };

      /************ ê³µí†µ UI ************/
      function Card({ children, className = '', ...props }) {
        const clickable = typeof props.onClick === 'function';
        const base = 'bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/50 ';
        return (
          <div
            {...props}
            className={base + className}
            role={clickable ? 'button' : props.role}
            tabIndex={clickable ? 0 : props.tabIndex}
            onKeyDown={clickable ? (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); props.onClick?.(e);} } : props.onKeyDown}
          >
            {children}
          </div>
        );
      }

      /************ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ************/
      function BiomarkerCard({ marker, onSelectGene }) {
        const z = Math.abs((marker.value - marker.koreanMean) / marker.stdDev);
        const status = z <= 1 ? 'normal' : z <= 2 ? 'warning' : 'critical';
        const icon = status === 'normal' ? <I.minus className="w-4 h-4 text-emerald-500"/> : status === 'warning' ? <I.up className="w-4 h-4 text-amber-500"/> : <I.warn className="w-4 h-4 text-rose-500"/>;
        const color = status === 'normal' ? 'border-emerald-200 from-emerald-50 to-cyan-50' : status === 'warning' ? 'border-amber-200 from-amber-50 to-orange-50' : 'border-rose-200 from-rose-50 to-pink-50';
        const expressionLevel = Math.max(0, Math.min(100, (100 - marker.value) / 2));
        return (
          <div className={`p-4 rounded-2xl border-2 bg-gradient-to-br ${color} transition-all duration-300 cursor-pointer hover:shadow-lg hover:scale-[1.02]`}
               onClick={()=>onSelectGene?.(marker.gene)}>
            <div className="flex items-center justify-between mb-3">
              <div className="flex items-center gap-2">
                {icon}
                <span className="font-bold text-slate-800 text-sm tracking-wide">{marker.gene}</span>
              </div>
              <span className="text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded-full font-medium">Î”Ct</span>
            </div>
            <div className="mb-3">
              <span className="text-xl font-bold text-slate-900">{marker.value}</span>
              <span className="text-xs text-slate-500 ml-2">(í‰ê· : {marker.koreanMean})</span>
            </div>
            <div className="text-xs text-slate-600 mb-3 font-medium">{marker.name}</div>
            <div className="w-full bg-slate-200 rounded-full h-2.5">
              <div className="bg-gradient-to-r from-indigo-500 to-purple-500 h-2.5 rounded-full transition-all duration-1000" style={{ width: `${expressionLevel}%` }} />
            </div>
            <div className="text-xs text-slate-500 mt-2 text-center font-medium">ë°œí˜„ ë ˆë²¨: {Math.round(expressionLevel)}%</div>
          </div>
        );
      }

      function GeneDetailModal({ gene, onClose }) {
        const d = BIOMARKER_DETAILS[gene];
        if (!d) return null;
        return (
          <div className="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50">
            <div className="bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl">
              <div className="sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-t-2xl p-6 flex items-center justify-between">
                <div>
                  <h2 className="text-xl font-bold">{gene}</h2>
                  <p className="text-indigo-100 text-sm">{d.fullName}</p>
                </div>
                <button onClick={onClose} className="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30">
                  <I.close />
                </button>
              </div>
              <div className="p-6 space-y-6">
                <div>
                  <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg"><I.beaker className="mr-2"/> ìœ ì „ì ê¸°ëŠ¥</h3>
                  <p className="text-slate-700 leading-relaxed">{d.function}</p>
                </div>
                <div>
                  <h3 className="font-bold text-slate-800 mb-3 text-lg">ì¡°ì ˆ ê¸°ì „</h3>
                  <p className="text-slate-700 leading-relaxed">{d.mechanism}</p>
                </div>
                <div>
                  <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg"><I.spark className="mr-2"/> ì¶”ì²œ í™”ì¥í’ˆ ì„±ë¶„</h3>
                  <div className="space-y-3">
                    {d.ingredients?.map((ig, i)=> (
                      <div key={i} className="p-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200">
                        <div className="font-semibold text-amber-900">{ig.name}</div>
                        <div className="text-amber-700 mt-1">{ig.description}</div>
                        <div className="text-xs text-amber-600 mt-2 font-medium">ê¶Œì¥ ë†ë„: {ig.concentration}</div>
                      </div>
                    ))}
                  </div>
                </div>
                <div>
                  <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg"><I.bag className="mr-2"/> ì¶”ì²œ ì œí’ˆ</h3>
                  <div className="space-y-2">
                    {d.products?.map((p,i)=> (
                      <div key={i} className="p-3 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200">
                        <div className="font-medium text-emerald-900">{p}</div>
                      </div>
                    ))}
                  </div>
                </div>
                <div>
                  <h3 className="font-bold text-slate-800 mb-3 flex items-center text-lg"><I.bulb className="mr-2"/> í”¼ë¶€ ê´€ë¦¬ íŒ</h3>
                  <div className="space-y-2">
                    {d.tips?.map((t,i)=> (
                      <div key={i} className="p-3 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl border border-yellow-200">
                        <div className="text-yellow-800 flex items-start"><span className="w-1.5 h-1.5 rounded-full mt-2 mr-3">â€¢</span>{t}</div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      /************ ë·°ë“¤ ************/
      function ReportsListView({ reports, onOpenReport, onOpenComparison }) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
            <div className="max-w-4xl mx-auto p-4">
              <Card className="p-6 mb-6">
                <div className="flex items-center justify-between">
                  <div>
                    <h1 className="text-2xl font-bold text-slate-900 tracking-tight">ğŸ§¬ í”¼ë¶€ ìœ ì „ì ë¶„ì„</h1>
                    <p className="text-slate-600 mt-1">ë‚˜ì˜ ë¶„ì„ ê¸°ë¡</p>
                  </div>
                  <button className="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold flex items-center gap-2 hover:shadow-lg">
                    <I.plus /> <span>ìƒˆ ë¶„ì„</span>
                  </button>
                </div>
              </Card>

              <div className="space-y-4">
                {reports.map((r)=> (
                  <Card key={r.id} className="p-6 cursor-pointer hover:shadow-xl transition hover:scale-[1.01]" onClick={()=>onOpenReport(r)}>
                    <div className="flex items-center justify-between">
                      <div className="flex items-center gap-4">
                        <div className="w-14 h-14 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center">
                          <span className="text-white font-bold text-sm">{r.week}ì£¼</span>
                        </div>
                        <div>
                          <h3 className="font-bold text-slate-900 text-lg">{r.title}</h3>
                          <p className="text-slate-600 flex items-center mt-1">
                            <I.cal className="mr-1"/> {new Date(r.date).toLocaleDateString('ko-KR')}
                          </p>
                        </div>
                      </div>
                      <div className="flex items-center gap-4">
                        <div className="text-right">
                          <div className="text-2xl font-bold text-indigo-600">{r.overallScore}</div>
                          <div className="text-xs text-slate-500 font-medium">ì¢…í•©ì ìˆ˜</div>
                        </div>
                        <I.chevR className="text-slate-400"/>
                      </div>
                    </div>
                  </Card>
                ))}
              </div>

              <div className="mt-8">
                <Card className="p-6 text-center cursor-pointer hover:shadow-xl" onClick={onOpenComparison}>
                  <div className="flex items-center justify-center gap-2">
                    <I.chart className="text-indigo-600"/> <span className="font-semibold text-slate-800 text-lg">ì „ì²´ íˆìŠ¤í† ë¦¬ ì°¨íŠ¸ ë³´ê¸°</span>
                  </div>
                </Card>
              </div>
            </div>
          </div>
        );
      }

      function AnalysisResultView({ data, report, onBack, onOpenComparison, onOpenRecommendations, onOpenRoutine, onSelectGene }) {
        const overallScore = report?.overallScore ?? 78;
        const CategorySection = ({ title, markers, icon }) => (
          <div className="mb-8">
            <div className="flex items-center gap-3 mb-4">
              <span className="text-2xl">{icon}</span>
              <h3 className="text-xl font-bold text-slate-900 tracking-tight">{title}</h3>
            </div>
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
              {markers.map((m)=> (
                <BiomarkerCard key={m.gene} marker={m} onSelectGene={onSelectGene} />
              ))}
            </div>
          </div>
        );

        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
            <div className="max-w-4xl mx-auto p-4">
              <Card className="p-6 mb-6">
                <div className="flex items-center justify-between">
                  <button onClick={onBack} className="flex items-center gap-2 text-slate-600 hover:text-slate-800">
                    <span className="rotate-180"><I.chevR /></span> <span className="font-medium">ë¦¬í¬íŠ¸ ëª©ë¡</span>
                  </button>
                  <div className="text-right">
                    <h1 className="text-xl font-bold text-slate-900">ë¶„ì„ ê²°ê³¼</h1>
                    <p className="text-slate-600 text-sm">{new Date().toLocaleDateString('ko-KR')}</p>
                  </div>
                </div>
              </Card>

              <div className="bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 rounded-2xl p-8 mb-8 text-white shadow-2xl">
                <div className="text-center">
                  <div className="text-6xl font-bold text-white mb-4 tracking-tight">{overallScore}</div>
                  <div className="text-xl opacity-90 mb-2 font-medium">ì¢…í•© ìœ ì „ì ì ìˆ˜</div>
                  <div className="text-sm text-indigo-100">11ê°œ ë°”ì´ì˜¤ë§ˆì»¤ ê¸°ì¤€</div>
                  <div className="w-full bg-white/20 rounded-full h-4 mt-6">
                    <div className="bg-gradient-to-r from-yellow-400 to-orange-400 h-4 rounded-full transition-all duration-1000" style={{ width: `${overallScore}%` }} />
                  </div>
                </div>
              </div>

              <div className="space-y-8">
                <CategorySection title="í”¼ë¶€ ë…¸í™”" markers={data.biomarkers.aging} icon="â³" />
                <CategorySection title="í”¼ë¶€ ê±´ì¡°" markers={data.biomarkers.dryness} icon="ğŸ’§" />
                <CategorySection title="í”¼ë¶€ ìƒ‰ì†Œ" markers={data.biomarkers.pigmentation} icon="ğŸ¨" />
              </div>

              <div className="grid grid-cols-2 gap-4 mt-8">
                <Card className="p-6 text-center cursor-pointer hover:shadow-xl" onClick={onOpenComparison}>
                  <div className="flex items-center justify-center gap-2"><I.chart className="text-indigo-600"/> <span className="font-semibold text-slate-800">ë¹„êµ ì°¨íŠ¸</span></div>
                </Card>
                <Card className="p-6 text-center cursor-pointer bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:shadow-xl" onClick={onOpenRecommendations}>
                  <div className="flex items-center justify-center gap-2"><I.info /> <span className="font-semibold">ë§ì¶¤ ì¶”ì²œ</span></div>
                </Card>
              </div>

              <div className="mt-4">
                <Card className="p-6 text-center cursor-pointer bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:shadow-xl" onClick={onOpenRoutine}>
                  <div className="flex items-center justify-center gap-2"><I.spark /> <span className="font-semibold">ğŸ§´ ë§ì¶¤ ë£¨í‹´ ë¹Œë”</span></div>
                </Card>
              </div>
            </div>
          </div>
        );
      }

      function ComparisonView({ onBack }) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
            <div className="max-w-4xl mx-auto p-4">
              <Card className="p-6 mb-6">
                <div className="flex items-center justify-between">
                  <button onClick={onBack} className="flex items-center gap-2 text-slate-600">
                    <span className="rotate-180"><I.chevR /></span> <span>ë’¤ë¡œ</span>
                  </button>
                  <h1 className="text-xl font-bold text-slate-900">ğŸ“Š ë¹„êµ ë¶„ì„</h1>
                </div>
              </Card>

              <Card className="p-8">
                <h3 className="text-2xl font-bold text-slate-900 mb-4">ë ˆì´ë” ì°¨íŠ¸ì™€ ìƒì„¸ ë¹„êµ ë¶„ì„</h3>
                <p className="text-slate-600 text-lg mb-6">11ê°œ ë°”ì´ì˜¤ë§ˆì»¤ì˜ ì¢…í•© ì‹œê°í™”ì™€ í•œêµ­ì¸ í‰ê·  ëŒ€ë¹„ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200">
                    <h4 className="font-bold text-blue-800 mb-3">ğŸ¯ ë ˆì´ë” ì°¨íŠ¸</h4>
                    <ul className="text-sm text-blue-700 space-y-1">
                      <li>â€¢ 11ê°œ ë°”ì´ì˜¤ë§ˆì»¤ í•œëˆˆì— ë³´ê¸°</li>
                      <li>â€¢ ì¹´í…Œê³ ë¦¬ë³„ ì„¸ë¶€ ë¶„ì„</li>
                      <li>â€¢ ì‹œê°ì  íŒ¨í„´ ì¸ì‹</li>
                    </ul>
                  </div>
                  <div className="p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200">
                    <h4 className="font-bold text-emerald-800 mb-3">ğŸ“ˆ ì§„í–‰ë„ ì¶”ì </h4>
                    <ul className="text-sm text-emerald-700 space-y-1">
                      <li>â€¢ ì‹œê°„ë³„ ë³€í™” ì¶”ì´</li>
                      <li>â€¢ ê°œì„  íš¨ê³¼ ì¸¡ì •</li>
                      <li>â€¢ ëª©í‘œ ë‹¬ì„±ë¥  í™•ì¸</li>
                    </ul>
                  </div>
                </div>
              </Card>
            </div>
          </div>
        );
      }

      function RecommendationsView({ onBack }) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
            <div className="max-w-4xl mx-auto p-4">
              <Card className="p-6 mb-6">
                <div className="flex items-center justify-between">
                  <button onClick={onBack} className="flex items-center gap-2 text-slate-600">
                    <span className="rotate-180"><I.chevR /></span> <span>ë’¤ë¡œ</span>
                  </button>
                  <h1 className="text-xl font-bold text-slate-900">ğŸ’¡ ë§ì¶¤ ì¶”ì²œ</h1>
                </div>
              </Card>

              <Card className="p-8">
                <h3 className="text-2xl font-bold text-slate-900 mb-4">ê°œì¸ ë§ì¶¤ ì¼€ì–´ ì¶”ì²œ</h3>
                <p className="text-slate-600 text-lg mb-6">ìœ ì „ì ë¶„ì„ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ê³¼í•™ì  ì¶”ì²œì‚¬í•­ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div className="p-6 bg-gradient-to-r from-rose-50 to-pink-50 rounded-xl border border-rose-200">
                    <h4 className="font-bold text-rose-800 mb-3">ğŸš¨ ê¸´ê¸‰ ê°œì„ </h4>
                    <p className="text-sm text-rose-700">ì¦‰ì‹œ ê´€ë¦¬ê°€ í•„ìš”í•œ ìœ ì „ì ì§‘ì¤‘ ì¼€ì–´ ê°€ì´ë“œ</p>
                  </div>
                  <div className="p-6 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border border-amber-200">
                    <h4 className="font-bold text-amber-800 mb-3">âš ï¸ ì£¼ì˜ ê´€ì°°</h4>
                    <p className="text-sm text-amber-700">ì˜ˆë°©ì  ê´€ë¦¬ë¥¼ í†µí•œ ìƒíƒœ ê°œì„  ë°©ì•ˆ</p>
                  </div>
                  <div className="p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200">
                    <h4 className="font-bold text-emerald-800 mb-3">âœ… í˜„ì¬ ìƒíƒœ ìœ ì§€</h4>
                    <p className="text-sm text-emerald-700">ì¢‹ì€ ìƒíƒœë¥¼ ì§€ì†í•˜ê¸° ìœ„í•œ ê´€ë¦¬ ë°©ë²•</p>
                  </div>
                </div>
              </Card>
            </div>
          </div>
        );
      }

      function RoutineBuilderView({ onBack }) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
            <div className="max-w-4xl mx-auto p-4">
              <Card className="p-6 mb-6">
                <div className="flex items-center justify-between">
                  <button onClick={onBack} className="flex items-center gap-2 text-slate-600">
                    <span className="rotate-180"><I.chevR /></span> <span>ë’¤ë¡œ</span>
                  </button>
                  <h1 className="text-xl font-bold text-slate-900">ğŸ§´ ë§ì¶¤ ë£¨í‹´ ë¹Œë”</h1>
                </div>
              </Card>

              <Card className="p-8">
                <h3 className="text-2xl font-bold text-slate-900 mb-4">AI ê¸°ë°˜ ìŠ¤í‚¨ì¼€ì–´ ë£¨í‹´</h3>
                <p className="text-slate-600 text-lg mb-6">ìœ ì „ì ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°œì¸ ë§ì¶¤ ë£¨í‹´ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.</p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="p-6 bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl border border-orange-200">
                    <h4 className="font-bold text-orange-800 mb-3">ğŸŒ… ëª¨ë‹ ë£¨í‹´</h4>
                    <ul className="text-sm text-orange-700 space-y-2">
                      <li>â€¢ ìì™¸ì„  ì°¨ë‹¨ ì¤‘ì‹¬</li>
                      <li>â€¢ í•­ì‚°í™” ì„±ë¶„ ì ìš©</li>
                      <li>â€¢ 5-6ë‹¨ê³„ ì²´ê³„ì  ì¼€ì–´</li>
                      <li>â€¢ ì•½ 10ë¶„ ì†Œìš”</li>
                    </ul>
                  </div>
                  <div className="p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl border border-purple-200">
                    <h4 className="font-bold text-purple-800 mb-3">ğŸŒ™ ì´ë¸Œë‹ ë£¨í‹´</h4>
                    <ul className="text-sm text-purple-700 space-y-2">
                      <li>â€¢ ì¬ìƒê³¼ íšŒë³µ ì¤‘ì‹¬</li>
                      <li>â€¢ ì˜ì–‘ ê³µê¸‰ ì§‘ì¤‘</li>
                      <li>â€¢ 6-7ë‹¨ê³„ ì‹¬í™” ì¼€ì–´</li>
                      <li>â€¢ ì•½ 15ë¶„ ì†Œìš”</li>
                    </ul>
                  </div>
                </div>
                <div className="mt-8 p-6 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl border border-yellow-200">
                  <h4 className="font-bold text-yellow-800 mb-3">âš ï¸ ì œí’ˆ ì¶©ëŒ ë°©ì§€</h4>
                  <p className="text-sm text-yellow-700">ë¹„íƒ€ë¯¼ CÂ·ë ˆí‹°ë†€, ë‚˜ì´ì•„ì‹ ì•„ë§ˆì´ë“œÂ·AHA ë“± ì„±ë¶„ ì¶©ëŒ ìë™ ê°ì§€ì™€ ì•ˆì „ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
                </div>
              </Card>
            </div>
          </div>
        );
      }

      /************ App ë£¨íŠ¸ ************/
      function App() {
        const [view, setView] = useState('reports');
        const [selectedReport, setSelectedReport] = useState(null);
        const [selectedGene, setSelectedGene] = useState(null);
        const reports = SAMPLE_REPORTS;
        const data = SAMPLE_CURRENT_DATA;

        return (
          <>
            {view === 'reports' && (
              <ReportsListView
                reports={reports}
                onOpenReport={(r)=>{ setSelectedReport(r); setView('analysis'); }}
                onOpenComparison={()=> setView('comparison')}
              />
            )}

            {view === 'analysis' && (
              <AnalysisResultView
                data={data}
                report={selectedReport}
                onBack={()=> setView('reports')}
                onOpenComparison={()=> setView('comparison')}
                onOpenRecommendations={()=> setView('recommendations')}
                onOpenRoutine={()=> setView('routine')}
                onSelectGene={(g)=> setSelectedGene(g)}
              />
            )}

            {view === 'comparison' && (
              <ComparisonView onBack={()=> setView('reports')} />
            )}

            {view === 'recommendations' && (
              <RecommendationsView onBack={()=> setView('analysis')} />
            )}

            {view === 'routine' && (
              <RoutineBuilderView onBack={()=> setView('analysis')} />
            )}

            {selectedGene && (
              <GeneDetailModal gene={selectedGene} onClose={()=> setSelectedGene(null)} />
            )}
          </>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
